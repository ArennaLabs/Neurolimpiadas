<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Info Evento | Neurolimpiadas</title>
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/static/img/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/static/img/favicon/favicon.svg" />
  <link rel="shortcut icon" href="/static/img/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="Neurolimpiadas" />
  <link rel="manifest" href="/static/img/favicon/site.webmanifest" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  <script src="https://kit.fontawesome.com/6b1dbe6118.js" crossorigin="anonymous"></script></head>
  <script async src="//www.instagram.com/embed.js"></script>
  <!-- Cargar Componentes -->
   <script src="/static/js/loadComponents.js"></script>
  <style>
    .neurolimpiadas-font{
      color: white;
    }
    @keyframes fadeInLeft {
  0% {
    opacity: 0;
    transform: translateX(-40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fadeInRight {
  0% {
    opacity: 0;
    transform: translateX(40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-fadeInLeft {
  animation: fadeInLeft 3s ease-out forwards;
}

.animate-fadeInRight {
  animation: fadeInRight 3s ease-out forwards;
}
@keyframes fadeInZoom {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fadeInZoom {
  animation: fadeInZoom 2s ease-out forwards;
}
  </style>
  
</head>


<body>
    <!-- Navbar -->
    <div id="navbar-container"></div>
    <!-- Seccion Principal -->
    <section class="bg-gray-50">
        <div class="max-w-6xl mx-auto px-4 py-8 space-y-10">

            <!-- Fila: Información + Cartel -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            
                <!-- Información a la izquierda -->
                <div class="bg-white rounded-2xl  p-6 space-y-4 observe-left">
                    <h1 id="titulo" class="text-3xl font-bold text-[#6ca9df]"></h1>
                    <p id="descripcion" class="text-gray-700"></p>
                    <ul class="list-disc pl-5 space-y-1 text-black font-bold">
                    <li>Fecha: <a id="fecha"></a></li>
                    <li>Lugar: <a id="lugar"></a></li>
                    <li>Duración: <a id="duracion"></a></li>
                    <li>Organizador: <a id="organizador"></a></li>
                    <li>Actividades: </li>
                    </ul>
                    <div class="p6 space-y-4" id="bloque-dias">
                    
                    </div>
                </div>

                <!-- Cartel del evento a la derecha -->
                <div class="rounded-2xl overflow-hidden w-full bg-white text-center observe-right">
                    <img src="/static/img/eventos/la_palma/cartel2.jpg" alt="Cartel del evento" class="w-full h-auto object-contain" />
                    <span class="neurolimpiadas-font text-[#6ca9df] text-2xl font-bold" id="campeonato"></span><br>
                    <span class ="neurolimpiadas-font text-[#6ca9df] text-2xl font-bold" id="year"></span><br>
                    <span class="neurolimpiadas-font text-[#6ca9df] text-4xl font-bold" id="date"></span><br>
                    <span class="neurolimpiadas-font text-[#6ca9df] text-2xl font-bold" id="month"></span><br>
                    <span class="neurolimpiadas-font text-[#6ca9df] text-xl font-bold "  id="lugar2"></span><br>
                    <span class="neurolimpiadas-font text-[#6ba9e1] font-bold text-xl" id="municipio"></span><br> 
                    <div class="grid grid-cols-3   items-start w-full">
                    <span class="neurolimpiadas-font text-[#6ba9e1] font-bold text-xl ml-10">Organiza </span>
                    <div></div>
                    <span class="neurolimpiadas-font text-[#6ba9e1] font-bold text-xl mr-20">Colabora </span><br>
                    </div>
                    <div class="grid grid-cols-5 items-start w-full">
                        <img id="org1"  class="w-4/5 h-auto object-contain ml-3 mb-5"/>
                        <img id="org2"  class="w-3/5 h-auto object-contain ml-3"/>
                        <div></div>
                        <img id="colab1" class="w-2/5 h-auto object-contain"/>
                        <img id="colab2" class="w-3/4 h-auto object-contain"/>
                    </div>
                </div>
            </div>  
        </div>
    </section>

<!-- Mapas de localización en una fila -->
<div class="bg-white rounded-2xl p-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="opacity-0 flex flex-col" id="bloque-mapa1">
            <h3 class="text-xl font-bold text-[#6ca9df] mb-4 text-center" id="mapa-titulo-1"></h3>
            <div class="flex-1 flex justify-center items-start hover:opacity-100 hover:scale-105 duration-300" id="mapa1"></div>
        </div>
        <div class="opacity-0 flex flex-col" id="bloque-mapa2">
            <h3 class="text-xl font-bold text-[#6ca9df] mb-4 text-center " id="mapa-titulo-2"></h3>
            <div class="flex-1 flex justify-center items-start hover:opacity-100 hover:scale-105 duration-300" id="mapa2"></div>
        </div>
    </div>
</div>

<!-- Patrocinadores -->
  <section class="w-full py-10 bg-gray-50">
    <div class="max-w-full px-8 md:px-24 ">

        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div class="flex items-center mb-4 md:mb-0">
                <div class="w-1 h-6 bg-[#4672b5] mr-3"></div>
                <h2 class="font-medium text-lg tracking-wider">PATROCINADORES</h2>
            </div>
        </div>

        <div class="h-px w-full bg-gray-200 mb-8"></div>
        <div class="items-center">
            <!-- Logos de Patrocinadores-->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 observe-left" id="patrocinadores">
                <!-- Se añaden dinámicamente-->  
            </div>
        </div>
    </div>
  </section>

<!-- Colaboradores -->
<section class="w-full bg-white py-10">
    <div class="max-w-full px-8 md:px-24">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div class="flex items-center mb-4 md:mb-0">
                <div class="w-1 h-6 bg-[#4672b5] mr-3"></div>
                <h2 class="font-medium text-lg tracking-wider">COLABORADORES</h2>
            </div>
        </div>

        <div class="h-px w-full bg-gray-200 mb-8"></div>
        
        <!-- Logos de ayuntamientos -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 observe-right" id="colaboradores">
          <!-- Se añaden dinámicamente-->  
        </div>
    </div>
    
</section>


  
       
     <!--Imagen Modal Auxiliar -->  
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50 hidden">
      <img id="modalImg" class="max-w-6xl max-h-[100vh] rounded shadow-lg">
      <button onclick="hideImageModal()" class="absolute top-4 right-4 text-white text-4xl font-bold">&times;</button>
    </div>


    <!-- Footer -->
   <div id="footer-container"></div>

    

    <script>
        
    // Función para obtener el ID del evento de la URL
        function getEventoId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }

    // Cargar y mostrar la información del evento
    async function cargarInformacionEvento() {
        try {
            const response = await fetch('/static/json/informacion_eventos.json');
            const data = await response.json();

            const eventoID = getEventoId(); // id desde URL
            const evento = data.eventos.find(e => e.id === eventoID);

            if (!evento) {
                console.error('Evento no encontrado');
                return;
            }

            // Actualizar título de la página
            document.title = `${evento.titulo} | Neurolimpiadas`;

            // Información básica
            document.getElementById('titulo').textContent = evento.titulo;
            document.getElementById('descripcion').textContent = evento.descripcion;
            document.getElementById('fecha').textContent = evento.fecha;
            document.getElementById('lugar').textContent = evento.lugar;
            document.getElementById('lugar2').textContent = evento.lugar2;
            document.getElementById('duracion').textContent = evento.duracion;
            document.getElementById('organizador').textContent = evento.organizador;


            // Cartel del evento
            document.getElementById('campeonato').textContent = evento.campeonato;
            document.getElementById('year').textContent = evento.year;
            document.getElementById('date').textContent = evento.date;
            document.getElementById('month').textContent = evento.month;
            document.getElementById('municipio').textContent = evento.municipio;


            // Imágenes de organizadores/colaboradores
            document.getElementById('org1').src = evento.imagenes.org1;
            document.getElementById('org2').src = evento.imagenes.org2;
            document.getElementById('colab1').src = evento.imagenes.colab1;
            document.getElementById('colab2').src = evento.imagenes.colab2;
         


           // Bloque dinámico de días del evento
            const contenedorDias = document.getElementById('bloque-dias');
            contenedorDias.innerHTML = ''; // Limpiar por si acaso

            const diasOrden = Object.keys(evento.evento); // ["1º Dia", "2º Dia", "3º Dia"]

            diasOrden.forEach((nombreDia, index) => {
                const numeroDia = index + 1;
                const detallesID = `details-${numeroDia}`;
                
                // Línea superior
                const linea = document.createElement('div');
                linea.className = "h-px w-full bg-[#6ca9df]";
                contenedorDias.appendChild(linea);

                // Título y botón
                const header = document.createElement('div');
                header.className = "flex items-center justify-between";

                const titulo = document.createElement('span');
                titulo.className = "neurolimpiadas-font text-black text-lg font-bold";
                titulo.textContent = nombreDia.replace('º ', 'º '); // conservar formato

                const boton = document.createElement('button');
                boton.className = "text-[#6ca9df] font-bold text-sm";
                boton.textContent = "Ver más";
                boton.setAttribute("onclick", `toggleDetails('${detallesID}', this)`);

                header.appendChild(titulo);
                header.appendChild(boton);
                contenedorDias.appendChild(header);

                // Contenido expandible
                const detalles = document.createElement('div');
                detalles.id = detallesID;
                detalles.className = "overflow-hidden max-h-0 opacity-0 transition-max";

                // Rellenar actividades del día
                detalles.innerHTML = evento.evento[nombreDia].map(item => `
                    <span class="neurolimpiadas-font text-[#6ca9df] text-base font-bold">${item.hora}</span>
                    <span class="neurolimpiadas-font text-black text-base font-bold">${item.actividad}</span><br>
                `).join('');

                contenedorDias.appendChild(detalles);
            });

            // Mapa
            const contenedorMapa = document.getElementById('mapa1');
            document.getElementById('mapa-titulo-1').textContent = evento.mapa.titulo;
        if (evento.mapa?.src) {
            const iframe = document.createElement('iframe');
            iframe.src = evento.mapa.src;
            iframe.className = "w-full max-w-2xl h-[450px] rounded-xl shadow-lg";
            iframe.style.border = "0";
            iframe.allowFullscreen = true;
            iframe.loading = "lazy";
            iframe.referrerPolicy = "no-referrer-when-downgrade";
            contenedorMapa.appendChild(iframe);
        }

        // Mapa 2
        const contenedorMapa2 = document.getElementById('mapa2');
        document.getElementById('mapa-titulo-2').textContent = evento.mapa2.titulo;
        if (evento.mapa2?.src) {
            const iframe = document.createElement('iframe');
            iframe.src = evento.mapa2.src;
            iframe.className = "w-full max-w-2xl h-[450px] rounded-xl shadow-lg";
            iframe.style.border = "0";
            iframe.allowFullscreen = true;
            iframe.loading = "lazy";
            iframe.referrerPolicy = "no-referrer-when-downgrade";
            contenedorMapa2.appendChild(iframe);
        }
        
            //Patrocinadores
            const contenedorPatrocinadores = document.getElementById('patrocinadores');
            contenedorPatrocinadores.innerHTML = '';
            evento.patrocinadores.forEach(patro => {
                const div = document.createElement('div');
                div.className = 'flex justify-center items-center';

                const img = document.createElement('img');
                img.src = patro.src;
                img.alt = patro.alt || 'Patrocinador';
                img.className = 'h-24 w-auto grayscale hover:grayscale-0 transition duration-300';

                div.appendChild(img);
                contenedorPatrocinadores.appendChild(div);
            });

            // Colaboradores
            const contenedorColabs = document.getElementById('colaboradores');
            contenedorColabs.innerHTML = '';
            evento.colaboradores.forEach(logo => {
                const div = document.createElement('div');
                div.className = 'flex justify-center items-center';

                const img = document.createElement('img');
                img.src = logo.src;
                img.alt = logo.alt || 'Colaborador';
                img.className = 'h-24 w-auto grayscale hover:grayscale-0 transition duration-300';

                div.appendChild(img);
                contenedorColabs.appendChild(div);
            });

        } catch (error) {
            console.error('Error al cargar la información del evento:', error);
        }
    }

    document.addEventListener('DOMContentLoaded', cargarInformacionEvento);

    //Funcion para habilitar  los botones de ver mas y menos
    function toggleDetails(id, btn = null) {
    const element = document.getElementById(id);
    const isOpen = element.classList.contains('open');

    if (isOpen) {
        element.classList.remove('max-h-[1000px]', 'opacity-100', 'open');
        element.classList.add('max-h-0', 'opacity-0');
        if (btn) btn.textContent = "Ver más";
    } else {
        element.classList.remove('max-h-0', 'opacity-0');
        element.classList.add('max-h-[1000px]', 'opacity-100', 'open');
        if (btn) btn.textContent = "Ver menos";
    }
}

    // Animación de derecha e izquierda
    document.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const el = entry.target;
                    if (el.classList.contains('observe-left')) {
                        el.classList.add('animate-fadeInLeft');
                    } else if (el.classList.contains('observe-right')) {
                        el.classList.add('animate-fadeInRight');
                    }
                    el.classList.remove('opacity-0');
                    observer.unobserve(el); // Solo se anima una vez
                }
            });
        }, {
            threshold: 0.2 // Se activa cuando el 20% del elemento es visible
        });

        document.querySelectorAll('.observe-left, .observe-right').forEach(el => {
            observer.observe(el);
        });
    });

    const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
        entry.target.classList.add('animate-fadeInZoom');
        observer.unobserve(entry.target); // Para que no se repita
        }
    });
    }, { threshold: 0.1 });

    document.querySelectorAll('.opacity-0').forEach(el => observer.observe(el));
    </script>
</body>
</html>
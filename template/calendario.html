<!DOCTYPE html>
<html>
<head>
    <title>Calendario</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        arenna: {
                            green: '#2BB673',
                            hover: '#229A61'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gray-50">
    <nav class="bg-white shadow w-full mb-6">
        <div class="flex items-center justify-between h-16">
          
          <a href="home.html" class="flex-shrink-0">
            <img class="h-16 w-32" src="/static/img/logo.png" alt="Logo de la Empresa">
          </a>
          
          <!-- Menú de escritorio (visible en pantallas lg, es decir ≥1024px) -->
          <div class="hidden lg:flex space-x-4">
            <a href="home.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Inicio</a>
            <a href="neurolimpiadas.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Sobre Neurolimpiadas</a>
            <a href="equipos.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Clubes</a>
            <a href="calendario.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Calendario</a>
            <a href="clasificaciones.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Clasificaciones</a>
            <a href="noticias.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Noticias</a>
            <a href="galeria.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Galería</a>
            <a href="contactanos.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Contactanos</a>
          </div>
          
          <!-- Botón del menú móvil (visible en pantallas menores a 1024px) -->
          <div class="lg:hidden relative px-4">
            <button id="menu-toggle" 
                    class="p-2 bg-white border border-gray-200 rounded-full shadow hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <!-- Icono de hamburguesa -->
              <svg class="h-6 w-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
            
            <!-- Menú desplegable móvil: posicionado justo debajo del botón -->
            <div id="mobile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
              <a href="home.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Inicio</a>
              <a href="neurolimpiadas.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Sobre Neurolimpiadas</a>
              <a href="equipos.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Clubes</a>
              <a href="calendario.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Calendario</a>
              <a href="clasificaciones.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Clasificaciones</a>
              <a href="noticias.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Noticias</a>
              <a href="galeria.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Galería</a>
              <a href="contactanos.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Contactanos</a>
            </div>
          </div>
        </div>
      </nav>
    
    <!-- Reemplazar el div contenedor actual del calendario por este -->
    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 px-4">
        <!-- Contenedor del calendario (ocupará 2 columnas) -->
        <div class="lg:col-span-2 bg-white rounded-xl shadow-2xl p-6">
            <!-- Cabecera del calendario -->
            <div class="flex items-center justify-between mb-6">
                <button id="prevMonth" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <h2 id="monthYear" class="text-xl font-bold "></h2>
                <button id="nextMonth" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>

            <!-- Días de la semana -->
            <div class="grid grid-cols-7 gap-2 mb-2">
                <div class="text-center font-semibold text-sm text-gray-600">Lun</div>
                <div class="text-center font-semibold text-sm text-gray-600">Mar</div>
                <div class="text-center font-semibold text-sm text-gray-600">Mié</div>
                <div class="text-center font-semibold text-sm text-gray-600">Jue</div>
                <div class="text-center font-semibold text-sm text-gray-600">Vie</div>
                <div class="text-center font-semibold text-sm text-gray-600">Sáb</div>
                <div class="text-center font-semibold text-sm text-gray-600">Dom</div>
            </div>

            <!-- Días del mes -->
            <div id="calendarDays" class="grid grid-cols-7 gap-2">
                <!-- Los días se insertarán aquí dinámicamente -->
            </div>
        </div>

        <!-- Nueva sección de Próximos Eventos -->
        <div class="bg-white rounded-xl shadow-2xl p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                <svg class="w-6 h-6 mr-2 text-[#4672b5]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                Próximos Eventos
            </h2>
            <div id="upcoming-events" class="space-y-4">
                <!-- Los eventos se insertarán aquí dinámicamente -->
            </div>
        </div>
    </div>

    <script>
        class Calendar {
            constructor() {
                // Inicializar la fecha actual
                this.date = new Date();
                // Obtener el mes actual
                this.currentMonth = this.date.getMonth();
                // Obtener el año actual
                this.currentYear = this.date.getFullYear();
                
                // Obtener los elementos del DOM
                this.monthYear = document.getElementById('monthYear');
                this.calendarDays = document.getElementById('calendarDays');
                
                this.setupEventListeners();
                this.render();
                this.selectedStartDate = null;
                this.selectedEndDate = null;
                this.events = {
                    // Ejemplo de eventos
                    '2025-04-21': { title: 'Competición Regional', type: 'competition' },
                    '2025-04-25': { title: 'Entrenamiento Especial', type: 'training' },
                    '2025-05-01': { title: 'Final Provincial', type: 'competition' }
                };
                this.renderUpcomingEvents();
                this.setupModalEventListeners();
            }

            // Método para configurar los event listeners de los botones de navegación
            setupEventListeners() {
                document.getElementById('prevMonth').addEventListener('click', () => {
                    this.currentMonth--;
                    if (this.currentMonth < 0) {
                        this.currentMonth = 11;
                        this.currentYear--;
                    }
                    this.render();
                });

                document.getElementById('nextMonth').addEventListener('click', () => {
                    this.currentMonth++;
                    if (this.currentMonth > 11) {
                        this.currentMonth = 0;
                        this.currentYear++;
                    }
                    this.render();
                });
            }

            render() {
                const firstDay = new Date(this.currentYear, this.currentMonth, 1);
                const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);
                
                // Ajustar el día de inicio (0 = Domingo, 1 = Lunes, ..., 6 = Sábado)
                let startingDay = firstDay.getDay() - 1;
                if (startingDay === -1) startingDay = 6; // Si es domingo, ajustar a 6
                
                const monthLength = lastDay.getDate();
                const prevMonthLastDay = new Date(this.currentYear, this.currentMonth, 0).getDate();

                // Actualizar el título del mes y año
                const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                                  'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
                this.monthYear.textContent = `${monthNames[this.currentMonth]} ${this.currentYear}`;

                // Limpiar el calendario
                this.calendarDays.innerHTML = '';

                // Calcular el número total de días a mostrar
                const totalDays = startingDay + monthLength;
                const rows = Math.ceil(totalDays / 7);
                const daysNeeded = rows * 7;

                // Añadir días del mes anterior
                for (let i = startingDay - 1; i >= 0; i--) {
                    const day = prevMonthLastDay - i;
                    this.addDay(day, true, false);
                }

                // Añadir los días del mes actual
                for (let i = 1; i <= monthLength; i++) {
                    this.addDay(i, false, false);
                }

                // Añadir solo los días necesarios del mes siguiente
                const remainingDays = daysNeeded - (startingDay + monthLength);
                for (let i = 1; i <= remainingDays; i++) {
                    this.addDay(i, true, true);
                }
            }

            addDay(day, inactive = false, isNextMonth = false) {
                const dayElement = document.createElement('div');
                dayElement.className = `
                    aspect-square flex items-center justify-center rounded-lg
                    ${inactive ? 'text-gray-400' : 'text-gray-700'}
                    ${inactive ? '' : 'hover:bg-gray-100 cursor-pointer'}
                `;
                dayElement.textContent = day;

                // Marcar el día actual (solo para el mes actual)
                if (!inactive && this.isToday(day)) {
                    dayElement.className += ' bg-[#4672b5] text-white hover:bg-[#3a5d94]';
                }

                this.calendarDays.appendChild(dayElement);
            }

            // Método para verificar si el día es hoy
            isToday(day) {
                const today = new Date();
                return day === today.getDate() && 
                       this.currentMonth === today.getMonth() && 
                       this.currentYear === today.getFullYear();
            }

            // Método para procesar los eventos próximos
            renderUpcomingEvents() {
                const upcomingEventsContainer = document.getElementById('upcoming-events');
                upcomingEventsContainer.innerHTML = '';

                const today = new Date();
                today.setHours(0, 0, 0, 0);

                // Convertir eventos a array y ordenar por fecha
                const eventsList = Object.entries(this.events)
                    .map(([date, event]) => ({ date: new Date(date), ...event }))
                    .filter(event => event.date >= today)
                    .sort((a, b) => a.date - b.date);

                if (eventsList.length === 0) {
                    upcomingEventsContainer.innerHTML = `
                        <div class="text-center text-gray-500 py-4">
                            No hay eventos próximos programados
                        </div>
                    `;
                    return;
                }

                eventsList.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors';
                    
                    const dateFormatted = event.date.toLocaleDateString('es-ES', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });

                    eventElement.innerHTML = `
                        <div class="flex items-start">
                            <div class="flex-shrink-0 w-12 h-12 bg-[#4672b5] rounded-lg flex items-center justify-center text-white">
                                <span class="text-lg font-bold">${event.date.getDate()}</span>
                            </div>
                            <div class="ml-4">
                                <h3 class="font-semibold text-gray-800">${event.title}</h3>
                                <p class="text-sm text-gray-600">${dateFormatted}</p>
                            </div>
                        </div>
                    `;

                    upcomingEventsContainer.appendChild(eventElement);
                });
            }

            addEvent(title, date) {
                this.events[date] = { title, type: 'custom' };
                this.renderUpcomingEvents();
            }
        }

        // Inicializar el calendario
        const calendar = new Calendar();
    </script>
</body>
</html>
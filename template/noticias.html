<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ventana de Noticias</title>
  <!-- Incluir Tailwind CSS desde CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Estilos adicionales para la animación de los puntos indicadores */
    .dot {
      transition: all 0.3s ease;
    }
    .dot.active {
      /* Se expande en ancho cuando está activo */
      width: 12px;
      height: 12px;
    }
  </style>
</head>
<body class="bg-gray-00">
  <nav class="bg-white shadow w-full">
    <div class="flex items-center justify-between h-16">
      
      <a href="home.html" class="flex-shrink-0">
        <img class="h-16 w-32" src="/static/img/logo.png" alt="Logo de la Empresa">
      </a>
      
      <!-- Menú de escritorio (visible en pantallas lg, es decir ≥1024px) -->
      <div class="hidden lg:flex space-x-4">
        <a href="home.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Inicio</a>
        <a href="neurolimpiadas.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Sobre Neurolimpiadas</a>
        <a href="equipos.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Clubes</a>
        <a href="calendario.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Calendario</a>
        <a href="clasificaciones.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Clasificaciones</a>
        <a href="noticias.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Noticias</a>
        <a href="galeria.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Galería</a>
        <a href="contactanos.html" class="px-3 py-2 text-gray-600 hover:text-gray-800">Contactanos</a>
      </div>
      
      <!-- Botón del menú móvil (visible en pantallas menores a 1024px) -->
      <div class="lg:hidden relative px-4">
        <button id="menu-toggle" 
                class="p-2 bg-white border border-gray-200 rounded-full shadow hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <!-- Icono de hamburguesa -->
          <svg class="h-6 w-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
        
        <!-- Menú desplegable móvil: posicionado justo debajo del botón -->
        <div id="mobile-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
          <a href="home.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Inicio</a>
          <a href="neurolimpiadas.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Sobre Neurolimpiadas</a>
          <a href="equipos.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Clubes</a>
          <a href="calendario.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Calendario</a>
          <a href="clasificaciones.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Clasificaciones</a>
          <a href="noticias.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Noticias</a>
          <a href="galeria.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Galería</a>
          <a href="contactanos.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Contactanos</a>
        </div>
      </div>
    </div>
  </nav>

    <!-- Contenedor principal de la ventana de noticias -->
    <div class="relative h-screen">
      <!-- Sección principal de las noticias: ocupa 70% de la altura de la ventana -->
      <div class="relative h-[70vh] w-full overflow-hidden p-6 mb-8">
        <!-- Contenedor del slider para imágenes y títulos -->
        <div id="slider" class="absolute inset-0 transition-all duration-500">
          <!-- Contenido dinámico (se actualizará mediante JavaScript) -->
        </div>
        
        <!-- Botón de navegación izquierdo (Previo), centrado verticalmente -->
        <button 
          id="prev" 
          class="absolute top-1/2 left-6 transform -translate-y-1/2 p-3 border border-white rounded-full bg-black bg-opacity-50 text-white hover:bg-white hover:text-black transition-colors duration-300 focus:outline-none z-10" 
          aria-label="Anterior proyecto"
        >
          &#10094;
        </button>
        
        <!-- Botón de navegación derecho (Siguiente), centrado verticalmente -->
        <button 
          id="next" 
          class="absolute top-1/2 right-6 transform -translate-y-1/2 p-3 border border-white rounded-full bg-black bg-opacity-50 text-white hover:bg-white hover:text-black transition-colors duration-300 focus:outline-none z-10" 
          aria-label="Siguiente proyecto"
        >
          &#10095;
        </button>
        
        <!-- Contenedor de los puntos indicadores, ubicado dentro de la imagen y con separación desde el fondo -->
        <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10">
          <!-- Cada botón representa un slide (noticia) -->
          <button class="dot w-3 h-3 rounded-full bg-gray-400"></button>
          <button class="dot w-3 h-3 rounded-full bg-gray-400"></button>
          <button class="dot w-3 h-3 rounded-full bg-gray-400"></button>
          <!-- Agrega más botones si tienes más noticias -->
        </div>
      </div>
      <!-- Reemplazar la sección después del slider con: -->
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Sección de Noticia Destacada -->
        <div class="flex items-center mb-6">
            <div class="w-1 h-6 bg-[#4672b5] mr-3"></div>
            <h2 class="font-medium text-lg tracking-wider">NOTICIA DESTACADA</h2>
        </div>
        
        <div class="h-px w-full bg-gray-200 mb-8"></div>

        <!-- Card de Noticia Destacada -->
        <div class="flex flex-col lg:flex-row bg-white shadow-lg rounded-lg overflow-hidden mb-16">
            <div class="lg:w-1/2">
                <img id="data-imagen" 
                    alt="Noticia destacada" 
                    class="w-full h-full object-cover">
            </div>
            <div class="lg:w-1/2 p-8 flex flex-col justify-between">
                <div>
                    <div class="flex justify-between items-center mb-4">
                        <span id="data-categoria" 
                              class="bg-arenna-blue text-white text-xs font-medium px-3 py-1 rounded-full">
                        </span>
                        <span id="data-fecha" class="text-gray-500 text-sm"></span>
                    </div>
                    <h3 id="data-titulo" 
                        class="text-2xl font-bold text-gray-900 mb-4">
                    </h3>
                    <p id="data-descripcion" 
                      class="text-gray-600 leading-relaxed mb-6">
                    </p>
                </div>
                <a href="#" 
                  class="inline-flex items-center text-arenna-blue hover:text-arenna-hover font-medium">
                    Leer más
                    <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
        </div>

        <!-- Sección de Últimas Noticias -->
        <div class="flex items-center mb-6">
            <div class="w-1 h-6 bg-[#4672b5] mr-3"></div>
            <h2 class="font-medium text-lg tracking-wider">ÚLTIMAS NOTICIAS</h2>
        </div>
        
        <div class="h-px w-full bg-gray-200 mb-8"></div>

        <!-- Grid de Noticias -->
        <div id="noticias-container" 
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        </div>
      </div>

  <!-- NOTICIAS SECUNDARIAS -->
  

  <!-- Script JavaScript para el slider -->
  <script>
    // Eliminar la constante slides y reemplazar con:
    let slides = [];
    let currentIndex = 0;
    const slider = document.getElementById('slider');

    // Modificar la función cargarNoticias para cargar también el slider
    async function cargarNoticias() {
    try {
        const response = await fetch('/static/json/informacion_noticias.json');
        const data = await response.json();
        
        // 1. Primero, manejar la noticia destacada
        const noticiaDestacada = data.noticias.find(noticia => noticia.destacada === true);
        if (noticiaDestacada) {
            document.getElementById('data-categoria').textContent = noticiaDestacada.categoria;
            document.getElementById('data-titulo').textContent = noticiaDestacada.titulo;
            document.getElementById('data-descripcion').textContent = noticiaDestacada.descripcion;
            document.getElementById('data-fecha').textContent = noticiaDestacada.fecha;
            document.getElementById('data-imagen').src = noticiaDestacada.imagen;
        }

        // 2. Luego, manejar las noticias del grid
        const noticias_container = document.getElementById('noticias-container');
        noticias_container.innerHTML = ''; // Limpiar el contenedor primero

        // Mostrar todas las noticias excepto la destacada
        data.noticias
            .filter(noticia => !noticia.destacada)
            .forEach(noticia => {
                noticias_container.innerHTML += createNoticiaCard(noticia);
            });

        // 3. Finalmente, manejar el slider
        slides = data.noticias
            .filter(noticia => noticia.slides === true)
            .map(noticia => ({
                image: noticia.imagen,
                title: noticia.titulo,
                subtitle: noticia.descripcion,
                link: noticia.url_noticia
            }));

        if (slides.length > 0) {
            const dotsContainer = document.querySelector('.absolute.bottom-6');
            dotsContainer.innerHTML = slides
                .map(() => '<button class="dot w-3 h-3 rounded-full bg-gray-400"></button>')
                .join('');

            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    clearInterval(timer);
                    showSlide(index);
                    timer = setInterval(nextSlide, 5000);
                });
            });

            showSlide(0);
        }

    } catch (error) {
        console.error('Error cargando noticias:', error);
    }
}



    function createNoticiaCard(noticia) {
    const colorClasses = {
        'Deportes': 'bg-red-100 text-red-800',
        'Destacados': 'bg-blue-100 text-blue-800',
        'General': 'bg-green-100 text-green-800'
    };

    return `
        <article class="bg-white rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300">
            <div class="relative">
                <img src="${noticia.imagen}" 
                     alt="Imagen de ${noticia.titulo}" 
                     class="w-full h-48 object-cover">
                <div class="absolute top-4 left-4">
                    <span class="${colorClasses[noticia.categoria]} text-xs font-medium px-2.5 py-1 rounded">
                        ${noticia.categoria}
                    </span>
                </div>
            </div>
            <div class="p-5">
                <div class="text-gray-500 text-sm mb-3">${noticia.fecha}</div>
                <h3 class="text-lg font-semibold text-gray-900 mb-2 line-clamp-2">
                    ${noticia.titulo}
                </h3>
                <p class="text-gray-600 mb-4 line-clamp-3">
                    ${noticia.descripcion}
                </p>
                <a href="${noticia.url_noticia}" 
                   class="inline-flex items-center text-arenna-blue hover:text-arenna-hover font-medium">
                    Leer más
                    <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
        </article>
    `;
}

    document.addEventListener('DOMContentLoaded', cargarNoticias);              
    // Definir un array con la información de cada noticia



    
    // Función para mostrar el slide de acuerdo al índice
    function showSlide(index) {
      currentIndex = (index + slides.length) % slides.length;
      const slide = slides[currentIndex];
      // Actualizar el contenedor slider con la imagen y el título sobrepuesta
      slider.innerHTML = `
        <a href="${slide.link}" class="block h-full relative" target="_blank">
          <div class="absolute inset-0 bg-black opacity-50"></div>
          <img src="${slide.image}" alt="${slide.title}" class="h-full w-full object-cover">
          <div class="absolute left-20 bottom-0 transform -translate-y-1/2 w-[30%] w-full  p-4">
            <h1 class="text-2xl font-bold text-white">${slide.title}</h1>
            <p class="text-white mt-2">${slide.subtitle}</p>
          </div>
        </a>
      `;
      updateDots();
    }

    // Función para actualizar la apariencia de los puntos indicadores
    function updateDots() {
        dots.forEach((dot, index) => {
          if(index === currentIndex) {
            dot.classList.add('active');
            dot.classList.remove('bg-gray-400');
            dot.classList.add('bg-white'); // Para resaltar el seleccionado
          } else {
            dot.classList.remove('active');
            dot.classList.remove('bg-white');
            dot.classList.add('bg-gray-400');
          }
        });
      }

    // Función para avanzar al siguiente slide
    function nextSlide() {
      showSlide(currentIndex + 1);
    }

    // Función para retroceder al slide anterior
    function prevSlide() {
      showSlide(currentIndex - 1);
    }

    // Configurar un intervalo para cambiar automáticamente de slide cada 5 segundos
    let timer = setInterval(nextSlide, 5000);

    // Agregar eventos a los botones de navegación
    document.getElementById('next').addEventListener('click', () => {
      clearInterval(timer); // Reiniciar temporizador
      nextSlide();
      timer = setInterval(nextSlide, 5000);
    });
    document.getElementById('prev').addEventListener('click', () => {
      clearInterval(timer); // Reiniciar temporizador
      prevSlide();
      timer = setInterval(nextSlide, 5000);
    });

    // Agregar eventos a los puntos indicadores para saltar a una noticia en particular
    document.querySelectorAll('.absolute.bottom-6 > button').forEach((dot, index) => {
      dot.addEventListener('click', () => {
        clearInterval(timer);
        showSlide(index);
        timer = setInterval(nextSlide, 5000);
      });
    });

    const dots = document.querySelectorAll('.absolute.bottom-6 > button');
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          clearInterval(timer);
          showSlide(index);
          timer = setInterval(nextSlide, 5000);
        });
      });

    // Inicializar el slider con el primer slide
    showSlide(currentIndex);
  </script>

</body>
</html>
